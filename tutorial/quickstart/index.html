<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Q1mi">
        <link rel="canonical" href="https://q1mi.github.io/Django-REST-framework-documentation/tutorial/quickstart/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Quickstart - Django REST framework中文站点</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Django REST framework中文站点</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">主页</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">教程 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../quickstart_zh/" class="dropdown-item">Quickstart</a>
</li>
                                    
<li>
    <a href="../1-serialization_zh/" class="dropdown-item">1 - Serialization</a>
</li>
                                    
<li>
    <a href="../2-requests-and-responses_zh/" class="dropdown-item">2 - Requests and responses</a>
</li>
                                    
<li>
    <a href="../3-class-based-views_zh/" class="dropdown-item">3 - Class based views</a>
</li>
                                    
<li>
    <a href="../4-authentication-and-permissions_zh/" class="dropdown-item">4 - Authentication and permissions</a>
</li>
                                    
<li>
    <a href="../5-relationships-and-hyperlinked-apis_zh/" class="dropdown-item">5 - Relationships and hyperlinked APIs</a>
</li>
                                    
<li>
    <a href="../6-viewsets-and-routers_zh/" class="dropdown-item">6 - Viewsets and routers</a>
</li>
                                    
<li>
    <a href="../7-schemas-and-client-libraries_zh/" class="dropdown-item">7 - Schemas and client libraries</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">API指南 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../api-guide/requests_zh/" class="dropdown-item">Requests</a>
</li>
                                    
<li>
    <a href="../../api-guide/responses_zh/" class="dropdown-item">Responses</a>
</li>
                                    
<li>
    <a href="../../api-guide/views_zh/" class="dropdown-item">Views</a>
</li>
                                    
<li>
    <a href="../../api-guide/generic-views_zh/" class="dropdown-item">Generic views</a>
</li>
                                    
<li>
    <a href="../../api-guide/viewsets_zh/" class="dropdown-item">Viewsets</a>
</li>
                                    
<li>
    <a href="../../api-guide/routers_zh/" class="dropdown-item">Routers</a>
</li>
                                    
<li>
    <a href="../../api-guide/parsers_zh/" class="dropdown-item">Parsers</a>
</li>
                                    
<li>
    <a href="../../api-guide/renderers_zh/" class="dropdown-item">Renderers</a>
</li>
                                    
<li>
    <a href="../../api-guide/serializers_zh/" class="dropdown-item">Serializers</a>
</li>
                                    
<li>
    <a href="../../api-guide/fields/" class="dropdown-item">Serializer fields</a>
</li>
                                    
<li>
    <a href="../../api-guide/relations/" class="dropdown-item">Serializer relations</a>
</li>
                                    
<li>
    <a href="../../api-guide/validators/" class="dropdown-item">Validators</a>
</li>
                                    
<li>
    <a href="../../api-guide/authentication_zh/" class="dropdown-item">Authentication</a>
</li>
                                    
<li>
    <a href="../../api-guide/permissions_zh/" class="dropdown-item">Permissions</a>
</li>
                                    
<li>
    <a href="../../api-guide/throttling/" class="dropdown-item">Throttling</a>
</li>
                                    
<li>
    <a href="../../api-guide/filtering_zh/" class="dropdown-item">Filtering</a>
</li>
                                    
<li>
    <a href="../../api-guide/pagination/" class="dropdown-item">Pagination</a>
</li>
                                    
<li>
    <a href="../../api-guide/versioning_zh/" class="dropdown-item">Versioning</a>
</li>
                                    
<li>
    <a href="../../api-guide/content-negotiation/" class="dropdown-item">Content negotiation</a>
</li>
                                    
<li>
    <a href="../../api-guide/metadata/" class="dropdown-item">Metadata</a>
</li>
                                    
<li>
    <a href="../../api-guide/schemas/" class="dropdown-item">Schemas</a>
</li>
                                    
<li>
    <a href="../../api-guide/format-suffixes/" class="dropdown-item">Format suffixes</a>
</li>
                                    
<li>
    <a href="../../api-guide/reverse/" class="dropdown-item">Returning URLs</a>
</li>
                                    
<li>
    <a href="../../api-guide/exceptions/" class="dropdown-item">Exceptions</a>
</li>
                                    
<li>
    <a href="../../api-guide/status-codes/" class="dropdown-item">Status codes</a>
</li>
                                    
<li>
    <a href="../../api-guide/testing/" class="dropdown-item">Testing</a>
</li>
                                    
<li>
    <a href="../../api-guide/settings/" class="dropdown-item">Settings</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">主题 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../topics/documenting-your-api/" class="dropdown-item">Documenting your API</a>
</li>
                                    
<li>
    <a href="../../topics/api-clients/" class="dropdown-item">API Clients</a>
</li>
                                    
<li>
    <a href="../../topics/internationalization/" class="dropdown-item">Internationalization</a>
</li>
                                    
<li>
    <a href="../../topics/ajax-csrf-cors_zh/" class="dropdown-item">AJAX, CSRF & CORS</a>
</li>
                                    
<li>
    <a href="../../topics/html-and-forms/" class="dropdown-item">HTML & Forms</a>
</li>
                                    
<li>
    <a href="../../topics/browser-enhancements/" class="dropdown-item">Browser Enhancements</a>
</li>
                                    
<li>
    <a href="../../topics/browsable-api/" class="dropdown-item">The Browsable API</a>
</li>
                                    
<li>
    <a href="../../topics/rest-hypermedia-hateoas/" class="dropdown-item">REST, Hypermedia & HATEOAS</a>
</li>
                                    
<li>
    <a href="../../topics/third-party-packages.md" class="dropdown-item">Third Party Packages</a>
</li>
                                    
<li>
    <a href="../../topics/tutorials-and-resources.md" class="dropdown-item">Tutorials and Resources</a>
</li>
                                    
<li>
    <a href="../../topics/contributing.md" class="dropdown-item">Contributing to REST framework</a>
</li>
                                    
<li>
    <a href="../../topics/project-management.md" class="dropdown-item">Project management</a>
</li>
                                    
<li>
    <a href="../../topics/3.0-announcement.md" class="dropdown-item">3.0 Announcement</a>
</li>
                                    
<li>
    <a href="../../topics/3.1-announcement.md" class="dropdown-item">3.1 Announcement</a>
</li>
                                    
<li>
    <a href="../../topics/3.2-announcement.md" class="dropdown-item">3.2 Announcement</a>
</li>
                                    
<li>
    <a href="../../topics/3.3-announcement.md" class="dropdown-item">3.3 Announcement</a>
</li>
                                    
<li>
    <a href="../../topics/3.4-announcement.md" class="dropdown-item">3.4 Announcement</a>
</li>
                                    
<li>
    <a href="../../topics/3.5-announcement.md" class="dropdown-item">3.5 Announcement</a>
</li>
                                    
<li>
    <a href="../../topics/kickstarter-announcement.md" class="dropdown-item">Kickstarter Announcement</a>
</li>
                                    
<li>
    <a href="../../topics/mozilla-grant.md" class="dropdown-item">Mozilla Grant</a>
</li>
                                    
<li>
    <a href="../../topics/funding.md" class="dropdown-item">Funding</a>
</li>
                                    
<li>
    <a href="../../topics/release-notes.md" class="dropdown-item">Release Notes</a>
</li>
                                    
<li>
    <a href="../../topics/jobs.md" class="dropdown-item">Jobs</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a href="https://github.com/Q1mi/Django-REST-framework-documentation/edit/master/docs/tutorial/quickstart.md" class="nav-link"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#quickstart" class="nav-link">Quickstart</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#project-setup" class="nav-link">Project setup</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#serializers" class="nav-link">Serializers</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#views" class="nav-link">Views</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#urls" class="nav-link">URLs</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#pagination" class="nav-link">Pagination</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#settings" class="nav-link">Settings</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#testing-our-api" class="nav-link">Testing our API</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="quickstart"><a class="toclink" href="#quickstart">Quickstart</a></h1>
<p>We're going to create a simple API to allow admin users to view and edit the users and groups in the system.</p>
<h2 id="project-setup"><a class="toclink" href="#project-setup">Project setup</a></h2>
<p>Create a new Django project named <code>tutorial</code>, then start a new app called <code>quickstart</code>.</p>
<pre><code># Create the project directory
mkdir tutorial
cd tutorial

# Create a virtual environment to isolate our package dependencies locally
python3 -m venv env
source env/bin/activate  # On Windows use `env\Scripts\activate`

# Install Django and Django REST framework into the virtual environment
pip install django
pip install djangorestframework

# Set up a new project with a single application
django-admin startproject tutorial .  # Note the trailing '.' character
cd tutorial
django-admin startapp quickstart
cd ..
</code></pre>
<p>The project layout should look like:</p>
<pre><code>$ pwd
&lt;some path&gt;/tutorial
$ find .
.
./manage.py
./tutorial
./tutorial/__init__.py
./tutorial/quickstart
./tutorial/quickstart/__init__.py
./tutorial/quickstart/admin.py
./tutorial/quickstart/apps.py
./tutorial/quickstart/migrations
./tutorial/quickstart/migrations/__init__.py
./tutorial/quickstart/models.py
./tutorial/quickstart/tests.py
./tutorial/quickstart/views.py
./tutorial/settings.py
./tutorial/urls.py
./tutorial/wsgi.py
</code></pre>
<p>It may look unusual that the application has been created within the project directory. Using the project's namespace avoids name clashes with external modules (a topic that goes outside the scope of the quickstart).</p>
<p>Now sync your database for the first time:</p>
<pre><code>python manage.py migrate
</code></pre>
<p>We'll also create an initial user named <code>admin</code> with a password of <code>password123</code>. We'll authenticate as that user later in our example.</p>
<pre><code>python manage.py createsuperuser --email admin@example.com --username admin
</code></pre>
<p>Once you've set up a database and the initial user is created and ready to go, open up the app's directory and we'll get coding...</p>
<h2 id="serializers"><a class="toclink" href="#serializers">Serializers</a></h2>
<p>First up we're going to define some serializers. Let's create a new module named <code>tutorial/quickstart/serializers.py</code> that we'll use for our data representations.</p>
<pre><code>from django.contrib.auth.models import User, Group
from rest_framework import serializers


class UserSerializer(serializers.HyperlinkedModelSerializer):
    class Meta:
        model = User
        fields = ['url', 'username', 'email', 'groups']


class GroupSerializer(serializers.HyperlinkedModelSerializer):
    class Meta:
        model = Group
        fields = ['url', 'name']
</code></pre>
<p>Notice that we're using hyperlinked relations in this case with <code>HyperlinkedModelSerializer</code>.  You can also use primary key and various other relationships, but hyperlinking is good RESTful design.</p>
<h2 id="views"><a class="toclink" href="#views">Views</a></h2>
<p>Right, we'd better write some views then.  Open <code>tutorial/quickstart/views.py</code> and get typing.</p>
<pre><code>from django.contrib.auth.models import User, Group
from rest_framework import viewsets
from rest_framework import permissions
from tutorial.quickstart.serializers import UserSerializer, GroupSerializer


class UserViewSet(viewsets.ModelViewSet):
    """
    API endpoint that allows users to be viewed or edited.
    """
    queryset = User.objects.all().order_by('-date_joined')
    serializer_class = UserSerializer
    permission_classes = [permissions.IsAuthenticated]


class GroupViewSet(viewsets.ModelViewSet):
    """
    API endpoint that allows groups to be viewed or edited.
    """
    queryset = Group.objects.all()
    serializer_class = GroupSerializer
    permission_classes = [permissions.IsAuthenticated]
</code></pre>
<p>Rather than write multiple views we're grouping together all the common behavior into classes called <code>ViewSets</code>.</p>
<p>We can easily break these down into individual views if we need to, but using viewsets keeps the view logic nicely organized as well as being very concise.</p>
<h2 id="urls"><a class="toclink" href="#urls">URLs</a></h2>
<p>Okay, now let's wire up the API URLs.  On to <code>tutorial/urls.py</code>...</p>
<pre><code>from django.urls import include, path
from rest_framework import routers
from tutorial.quickstart import views

router = routers.DefaultRouter()
router.register(r'users', views.UserViewSet)
router.register(r'groups', views.GroupViewSet)

# Wire up our API using automatic URL routing.
# Additionally, we include login URLs for the browsable API.
urlpatterns = [
    path('', include(router.urls)),
    path('api-auth/', include('rest_framework.urls', namespace='rest_framework'))
]
</code></pre>
<p>Because we're using viewsets instead of views, we can automatically generate the URL conf for our API, by simply registering the viewsets with a router class.</p>
<p>Again, if we need more control over the API URLs we can simply drop down to using regular class-based views, and writing the URL conf explicitly.</p>
<p>Finally, we're including default login and logout views for use with the browsable API.  That's optional, but useful if your API requires authentication and you want to use the browsable API.</p>
<h2 id="pagination"><a class="toclink" href="#pagination">Pagination</a></h2>
<p>Pagination allows you to control how many objects per page are returned. To enable it add the following lines to <code>tutorial/settings.py</code></p>
<pre><code>REST_FRAMEWORK = {
    'DEFAULT_PAGINATION_CLASS': 'rest_framework.pagination.PageNumberPagination',
    'PAGE_SIZE': 10
}
</code></pre>
<h2 id="settings"><a class="toclink" href="#settings">Settings</a></h2>
<p>Add <code>'rest_framework'</code> to <code>INSTALLED_APPS</code>. The settings module will be in <code>tutorial/settings.py</code></p>
<pre><code>INSTALLED_APPS = [
    ...
    'rest_framework',
]
</code></pre>
<p>Okay, we're done.</p>
<hr />
<h2 id="testing-our-api"><a class="toclink" href="#testing-our-api">Testing our API</a></h2>
<p>We're now ready to test the API we've built.  Let's fire up the server from the command line.</p>
<pre><code>python manage.py runserver
</code></pre>
<p>We can now access our API, both from the command-line, using tools like <code>curl</code>...</p>
<pre><code>bash: curl -H 'Accept: application/json; indent=4' -u admin:password123 http://127.0.0.1:8000/users/
{
    "count": 2,
    "next": null,
    "previous": null,
    "results": [
        {
            "email": "admin@example.com",
            "groups": [],
            "url": "http://127.0.0.1:8000/users/1/",
            "username": "admin"
        },
        {
            "email": "tom@example.com",
            "groups": [                ],
            "url": "http://127.0.0.1:8000/users/2/",
            "username": "tom"
        }
    ]
}
</code></pre>
<p>Or using the <a href="https://github.com/jakubroztocil/httpie#installation">httpie</a>, command line tool...</p>
<pre><code>bash: http -a admin:password123 http://127.0.0.1:8000/users/

HTTP/1.1 200 OK
...
{
    "count": 2,
    "next": null,
    "previous": null,
    "results": [
        {
            "email": "admin@example.com",
            "groups": [],
            "url": "http://localhost:8000/users/1/",
            "username": "paul"
        },
        {
            "email": "tom@example.com",
            "groups": [                ],
            "url": "http://127.0.0.1:8000/users/2/",
            "username": "tom"
        }
    ]
}
</code></pre>
<p>Or directly through the browser, by going to the URL <code>http://127.0.0.1:8000/users/</code>...</p>
<p><img alt="Quick start image" src="../../img/quickstart.png" /></p>
<p>If you're working through the browser, make sure to login using the control in the top right corner.</p>
<p>Great, that was easy!</p>
<p>If you want to get a more in depth understanding of how REST framework fits together head on over to <a href="../1-serialization/">the tutorial</a>, or start browsing the <a href="../../api-guide/requests/">API guide</a>.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
